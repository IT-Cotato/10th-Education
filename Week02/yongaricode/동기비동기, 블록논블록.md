# 동시성 프로그래밍 concurrent

- 특정 프로세스의 실행 시간이 다른 프로세스의 흐름과 겹치는 상황을 동시에 실행한다고 한다.
- 여러 작업을 빠르게 교차하면서 동시에 수행되는 것처럼 보이도록 설계된 방식
- 각 작업은 독립적으로 실행된다.
- 효율적인 자원관리, 성능, 반응성, 확장성을 높게 가진다.

## 동시성하게 수행된다

스레드 : 프로그램 내에서 실행되는 작은 흐름의 단위

- 각 프로그램은 최소 하나 이상의 스레드를 가지고 실행된다.
- 스레드의 흐름이 딱 맞춰서 실행되는 경우 - 동시성하게 수행된다.
- 스레드의 흐름에 공백이 존재하는 경우 - 동시성 프로그래밍이 아니다.

### 경쟁상태 Race Condition

- 각 스레드가 공유자원에 동시에 접근하게 되면 발생하는 문제점
- 데이터 일관성이 깨진다
- 예기지 않은 동작이나 오류를 초래한다.

이러한 문제를 해결하기 위허 동시성의 다양한 동기화 기법을 사용하게 된다.
<br/><br/>

# 동기 - 비동기

요청한 작업을 순차적으로 수행할지 아닐지에 대한 관점을 가진다.

## 동기 Synchornous

- 작업시간을 순차적으로 실행한다는 의미
- 작업이 같이 시작해, 같이 끝나도록 하기 위해 사용된다.

## 비동기 Asynchornous

- 작업시간이 동시적으로 실행된다는 의미
- 작업의 시작과 끝을 신경쓰지 않기 위해 사용한다.
- 순서가 지켜지지 않을 수 있다.
- 작업이 끝나기 전에 끼어들어도 무관하다.
- 브라우저의 로딩 시에 비동기 함수로 처리한다
  - 특정 작업이 완료된 후 자동으로 호출되는 함수인 콜백함수를 이용해 구현한다.
<br/><br/>
# 블로킹 - 논블로킹

다른 작업의 실행이 현재 작업의 실행 흐름을 막는지 안막는지에 대한 관점을 가진다.

제어권에 따른 실행 차단과 관련된 개념이다.

제어권 : 스레드의 실행 흐름을 제어할 수 있는 권리

이 제어권을 새로 실행되는 스레드에게 넘기는가, 안넘기는가

## 블로킹 Blocking

- 실행중인 스레드에게 제어권이 있다가, 중간에 새롭게 실행되는 스레드가 발생하면, 제어권을 넘긴다. 이때 실행중인 스레드는 중단된다.

## 논블로킹 Non-Blocking

- 실행중인 스레드가 지속적으로 제어권을 가진다. 중간에 새롭게 실행되는 스레드는 제어권 없이 실행만 시키게 된다. 이때 실행중인 스레드는 제어권을 가지고 계속 실행된다. 새롭게 실행되는 스레드는 실행이 종료되었다는걸 알리기 위해 콜백함수를 이용한다.
<br/><br/>
# 4가지 조합

컴퓨터 실행 흐름은 4가지 개념을 조합해서 다양한 방법으로 사용된다.

## 동기 - 블로킹

- 다른 작업이 진행되는 동안 자신의 작업을 처리하지 않고, 다른 작업의 완료 여부를 받아 순차적으로 처리하는 방식
- 실행중인 스레드는, 새롭게 실행되는 스레드가 발생하면 실행을 중단한다. 새롭게 실행되는 스레드가 실행이 종료되었다고 리턴값을 보내면, 그제야 제어권이 다시 실행중이었던 스레드에게 돌아와 실행된다

## 비동기 - 논블로킹

- 다른 작업이 진행되는 동안 자신의 작업을 처리하고, 다른 작업의 결과를 바로 처리하지 않아서 순서가 보장되지 않는 방식
- 실행중인 스레드는, 새롭게 실행되는 스레드가 있어도 계속 실행하고있다. 종료되었다는 콜백함수를 받아서 결과를 처리한다.
- 이때 새롭게 실행되는 스레드가 여러개 있을 경우, 어떤게 먼저 끝날지 예상할 수 없어서 순서를 보장하지 않는 비동기 방식이다.

## 동기 - 논블로킹

- 다른 작업이 진행되는 동안에도 자신의 작업을 처리하고, 다른 작업의 결과를 순차대로 수행하는 방식
- 실행중인 스레드는 새롭게 실행되는 스레드에게, 작업이 완료되었는지 지속적으로 확인하는 과정을 거친다. 그 후 여러 작업들을 순차적으로 완료한다

## 비동기 - 블로킹

- 동기 블로킹과 성능의 차이가 없기 때문에 거의 사용되지 않는다.
<br/><br/>
# setTimeout 함수

비동기 vs 논블로킹

이론적인 개념이라, 실제 프로그래밍에서는 경계를 구분하기 애매한 경우도 있다고 한다.

### 자바스크립트의 setTimeout 함수는 관점에 따라 비동기 함수이며, 동시에 논블로킹 함수이기도 한다.

- 비동기 코드 : 코드가 setTimeout의 완료 여부를 신경쓰지않고 즉시 다음콘솔을 출력하고, setTimeout의 완료되었다는 콜백함수값을 출력했다.
- 논블로킹 코드 : setTimeout 함수는 제어권을 가진 메인함수와 별개로 백그라운드에서 별도로 처리되었다

특히 자바스크립트 교재나 강의에서는 setTimeout함수를 비동기함수라고 지칭하는 경우도 있는데, 오늘 교육을 통해 setTimeout 함수가 비동기+논블로킹 함수라는 것을 이해해야 한다!

(교육 최종 목표!)