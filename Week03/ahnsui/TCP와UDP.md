# TCP

> TCP: 인터넷 상에서 데이터를 메시지의 형태로 보내기 위해 IP와 함께 사용하는 프로토콜

- IP: 복잡한 인터넷 망 속에서 클라이언트와 서버 간에 통신을 하게 하는 것
- TCP는 이러한 IP 규칙만으로 통신하기에 불안정하던 여러 단점들을 커버해 패킷 전송을 제어하여 신뢰성을 보증하는 프로토콜이다.

### 패킷

> 패킷: 네트워크를 통해 전송되는 데이터의 기본 단위

- 데이터는 다양한 크기로 존재할 수 있지만, 전송의 효율성을 높이기 위해 일반적으로 작은 단위인 패킷으로 나누어 전송된다.
- 패킷은 한 개 이상의 헤더를 가지고 이 헤더에는 패킷에 대한 정보가 담겨있다.

### 플래그

> 플래그: 무언가를 기억해야 하거나 다른 프로그램에게 약속된 신호를 남기기 위한 용도로 프로그램에서 사용되는 미리 정의된 비트

- SYN 플래그: 연결 요청
- ACK 플래그: 상대방의 요청이나 데이터 수신을 확인
- FIN 플래그: 연결 종료를 요청

### 3-way handshake

1. 클라이언트가 서버에게 접속을 요청하는 SYN 플래그를 보낸다.
2. 서버가 SYN 요청을 받으면, 클라이언트에게 요청을 수락하는 ACK와 접속을 요청하는 SYN 플래그를 보낸다. 모두 접속해야 양방향 통신이 되기 때문
3. 클라이언트는 서버에게 잘 받았다는 ACK 플래그를 보낸다.

### 데이터 통신 과정

1. TCP 연결이 된 상태에서 서버는 클라이언트에게 데이터를 보낸다.
2. 클라이언트는 잘 전송 받았다고 ACK 플래그를 넣어 응답한다.
3. 만약 ACK를 못 받았으면 제대로 송신하지 못한 걸로 판단하고 데이터를 재전송한다.

### 4-way handshake

1. 클라이언트와 서버가 TCP 연결이 되어있는 상태에서 클라이언트가 접속을 끊기 위해 CLOSE() 함수를 호출하면 FIN 플래그를 보내게 되고 서버는 클라이언트가 CLOSE() 한다는 것을 알게 된다.
2. 서버는 클라이언트에게 잘 받았다는 ACK 플래그를 전송하고 만일 클라이언트에게 보낼 남은 데이터가 있을 경우 이때 나머지를 모두 전송한다.
3. 서버는 클라이언트와 마찬가지로 CLOSE() 함수를 호출하고 FIN 플래그를 클라이언트에게 보낸다.
4. 서버가 연결을 닫았다는 신호를 클라이언트가 받게 되면 서버에게 잘 받았다는 ACK 플래그를 보낸다.
5. 모든 과정이 끝나면 연결이 해제된다.

### 연결형 서비스

> 패킷을 전송하기 위해 논리적 경로를 미리 배정하고 패킷에 순서를 정해 차례대로 전송하는 것

1. 데이터를 전송하기 위해 먼저 패킷 단위로 나누고 순서를 정한다.
2. 경로를 미리 정해 패킷을 순서대로 전송한다. 순서가 정해져 있기 때문에 하나가 도착하지 못하더라도 어떤 데이터가 전송되지 못하였는지 찾기 쉽다.

### 전송 흐름 제어

- 오류제어: 통신 도중에 데이터가 유실되거나 잘못된 데이터가 수신되었을 때의 대처 방식
- 혼잡제어: 네트워크 내의 패킷 수가 갑작스럽게 증가하는 상황을 방지하는 방법 (호스트와 라우터를 포함한 보다 넓은 관점에서 전송 문제를 다룬다.)
- 흐름제어: 데이터를 송신하는 곳과 수신하는 곳의 처리속도를 조절하여 수신자의 버퍼 오버 플로우를 방지하는 것(송신측과 수신측 사이의 전송 속도를 다룬다.)

---

---

# UDP

> UDP: 데이터를 데이터그램 단위로 처리하는 프로토콜

\*데이터 그램: 독립적인 관계를 지니는 패킷

### 비연결형 서비스

연결을 위해 할당되는 논리적인 경로가 없어서 각각의 패킷은 다른 경로로 전송되고, 독립적으로 처리한다.

### No Handshake

패킷의 목적지만 정해져 있다면 중간 경로는 어디든 신경 쓰지 않기 때문에 핸드 쉐이크 과정 같은 연결 과정이 필요 없다.

---

---

# 정리

### TCP

- 연결형 서비스
- 전송 순서 보장 O
- 흐름제어, 오류제어, 혼잡제어 기법 사용 O
- 데이터를 전송할 때 수신여부를 확인하므로 신뢰성↑ 속도↓

### UDP

- 비연결형 서비스
- 전송 순서 보장 X
- 패킷을 독립적으로 처리
- 전송제어 기법 사용 X
- 데이터를 전송할 때 수신여부를 확인하지 않으므로 신뢰성↓ 속도↑
